{% extends 'base.html' %}

{% block title %}
Estatísticas - CareerStatus
{% endblock %}

{% block content %}
<main class="container mx-auto mt-4 px-4">
  <h2 class="text-2xl font-bold">Top 10 Jogadores</h2>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <!-- Mais Gols -->
    <div class="bg-white shadow-md rounded-lg p-4">
      <h3 class="text-xl font-semibold">Mais Gols</h3>
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2">Posição</th>
            <th class="px-4 py-2">Jogador</th>
            <th class="px-4 py-2">Gols</th>
          </tr>
        </thead>
        <tbody>
          {% for jogador in top_gols %}
          <tr>
            <td class="px-4 py-2">{{ forloop.counter }}</td>
            <td class="px-4 py-2">{{ jogador.jogador__nome }}</td>
            <td class="px-4 py-2">{{ jogador.total_gols }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="3" class="px-4 py-2 text-center">Nenhum dado disponível.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    
    <!-- Mais Assistências -->
    <div class="bg-white shadow-md rounded-lg p-4">
      <h3 class="text-xl font-semibold">Mais Assistências</h3>
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2">Posição</th>
            <th class="px-4 py-2">Jogador</th>
            <th class="px-4 py-2">Assistências</th>
          </tr>
        </thead>
        <tbody>
          {% for jogador in top_assistencias %}
          <tr>
            <td class="px-4 py-2">{{ forloop.counter }}</td>
            <td class="px-4 py-2">{{ jogador.jogador__nome }}</td>
            <td class="px-4 py-2">{{ jogador.total_assistencias }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="3" class="px-4 py-2 text-center">Nenhum dado disponível.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Mais Jogos e Melhor Média de Participação -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
    <div class="bg-white shadow-md rounded-lg p-4">
      <h3 class="text-xl font-semibold">Mais Jogos</h3>
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2">Posição</th>
            <th class="px-4 py-2">Jogador</th>
            <th class="px-4 py-2">Jogos</th>
          </tr>
        </thead>
        <tbody>
          {% for jogador in top_jogos %}
          <tr>
            <td class="px-4 py-2">{{ forloop.counter }}</td>
            <td class="px-4 py-2">{{ jogador.jogador__nome }}</td>
            <td class="px-4 py-2">{{ jogador.total_jogos }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="3" class="px-4 py-2 text-center">Nenhum dado disponível.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="bg-white shadow-md rounded-lg p-4">
      <h3 class="text-xl font-semibold">Melhor Média de Participação</h3>
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2">Posição</th>
            <th class="px-4 py-2">Jogador</th>
            <th class="px-4 py-2">Média</th>
          </tr>
        </thead>
        <tbody>
          {% for jogador in top_media_participacao %}
          <tr>
            <td class="px-4 py-2">{{ forloop.counter }}</td>
            <td class="px-4 py-2">{{ jogador.jogador__nome }}</td>
            <td class="px-4 py-2">{{ jogador.media_participacao|floatformat:"2" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="3" class="px-4 py-2 text-center">Nenhum dado disponível.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Estatísticas Gerais -->
  <h2 class="text-2xl font-bold mt-8">Estatísticas Gerais</h2>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
    <div class="bg-white shadow-md rounded-lg p-4">
      <h3 class="text-xl font-semibold">Jogadores por Temporada</h3>
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2">Temporada</th>
            <th class="px-4 py-2">Quantidade</th>
          </tr>
        </thead>
        <tbody>
          {% for item in jogadores_por_temporada %}
          <tr>
            <td class="px-4 py-2">{{ item.temporada_subida }}</td>
            <td class="px-4 py-2">{{ item.total }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="2" class="px-4 py-2 text-center">Nenhum dado disponível.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="bg-white shadow-md rounded-lg p-4">
      <h3 class="text-xl font-semibold">Média de Potencial</h3>
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2">Potencial Mínimo</th>
            <th class="px-4 py-2">Potencial Máximo</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="px-4 py-2">{{ media_potencial.media_potencial_min|floatformat:"2" }}</td>
            <td class="px-4 py-2">{{ media_potencial.media_potencial_max|floatformat:"2" }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Jogadores por Posição e Países com Mais Jogadores -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
    <div class="bg-white shadow-md rounded-lg p-4">
      <h3 class="text-xl font-semibold">Jogadores por Posição</h3>
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2">Posição</th>
            <th class="px-4 py-2">Quantidade</th>
          </tr>
        </thead>
        <tbody>
          {% for item in jogadores_por_posicao %}
          <tr>
            <td class="px-4 py-2">{{ item.posicao }}</td>
            <td class="px-4 py-2">{{ item.total }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="2" class="px-4 py-2 text-center">Nenhum dado disponível.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="bg-white shadow-md rounded-lg p-4">
      <h3 class="text-xl font-semibold">Top 10 Países com Mais Jogadores</h3>
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2">País</th>
            <th class="px-4 py-2">Quantidade</th>
          </tr>
        </thead>
        <tbody>
          {% for item in paises_com_mais_jogadores %}
          <tr>
            <td class="px-4 py-2">{{ item.nacionalidade }}</td>
            <td class="px-4 py-2">{{ item.total }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="2" class="px-4 py-2 text-center">Nenhum dado disponível.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Distribuição de Gols -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
    <div class="bg-white shadow-md rounded-lg p-4">
      <h3 class="text-xl font-semibold">Distribuição de Gols por Posição</h3>
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2">Posição</th>
            <th class="px-4 py-2">Gols</th>
          </tr>
        </thead>
        <tbody>
          {% for item in gols_por_posicao %}
          <tr>
            <td class="px-4 py-2">{{ item.jogador__posicao }}</td>
            <td class="px-4 py-2">{{ item.total_gols }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="2" class="px-4 py-2 text-center">Nenhum dado disponível.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="bg-white shadow-md rounded-lg p-4">
      <h3 class="text-xl font-semibold">Distribuição de Gols por País</h3>
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2">País</th>
            <th class="px-4 py-2">Gols</th>
          </tr>
        </thead>
        <tbody>
          {% for item in gols_por_pais %}
          <tr>
            <td class="px-4 py-2">{{ item.jogador__nacionalidade }}</td>
            <td class="px-4 py-2">{{ item.total_gols }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="2" class="px-4 py-2 text-center">Nenhum dado disponível.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</main>
{% endblock %}
